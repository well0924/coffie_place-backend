<!DOCTYPE html>
<html
xmlns="http://www.w3.org/1999/xhtml" 
xmlns:th="http://www.thymeleaf.org" 
xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
xmlns:sec="http://www.thymeleaf.org/extras/spring-security" 
layout:decorate="~{layout/leafframe}">
<head>
<meta charset="UTF-8">
<title>자유게시판 글조회</title>
<!-- summernote css/js-->
<link href="http://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.12/summernote.css" rel="stylesheet">
<script src="http://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.12/summernote.js"></script>
</head>
<body>
<th:block layout:fragment="content">
<div class="container" style="margin-top:100px">
	<div class="row">
		<div class="col-sm-12">
			<h1>게시글 열람</h1>
			<div class="card shadow">
				<div class="card-body">
					<input type="hidden" id="board_id" name="id">
					<input type="hidden" id="pwd" name="passWd">
					<input type="hidden" id="fileGroupId" name="fileGroupId">
					<div class="form-group">
						<label for="board_subject">제목</label>
						<input type="text" id="board_subject" name="boardTitle" class="form-control" th:value="${detail.boardTitle}" disabled="disabled"/>
					</div>
					<div class="form-group">
						<label for="board_writer">작성자</label>
						<input type="text" id="board_writer" name="boardAuthor" class="form-control" th:value="${detail.boardAuthor}" disabled="disabled"/>
					</div>
					<div class="form-group">
						<label for="board_date">작성날짜</label>
						<input type="text" id="board_date" name="createdAt" class="form-control" th:value="${detail.createdTime}" disabled="disabled"/>
					</div>                                           
					<div class="form-group">
						<label for="board_content">내용</label>
						<p>[[${detail.boardContents}]]</p>
					</div>
					<div class="form-group">
						<label for="board_content">조회수</label>
						<input id="board_content" name="readCount" class="form-control" rows="10" style="resize:none" th:value="${detail.readCount}" disabled="disabled">
					</div>
					<div class="form-group">
						<label>첨부 파일</label>
						<!-- 첨부파일 -->
						<th:block>
							</br>
							<a th:href="@{/api/file/boarddownload(boardId=${detail.id})}">
								<span id="files" name="originName"></span>
							</a>
						</th:block>
						<th:block>
							</br>
							첨부 파일이 없습니다.
						</th:block>
					</div>
					<div class="form-group">
						<div class="text-right">
							<a href="/page/board/list" class="btn btn-primary">목록보기</a>
							<a class="btn btn-primary" onclick="pwdCheck()">수정하기</a>
						</div>
					</div>
				</div>
				<!-- Comments section-->
				<div class="card mb-2">
					<div class="card-header bg-light">
	        			<i class="fa fa-comment fa"></i> REPLY
					</div>
					<div class="card-body">
						<ul class="list-group list-group-flush">
						    <li class="list-group-item">
								<input type="hidden" class="form-control ml-2" id="writer" name="replyAuthor"  th:value="${#authentication.name}">
								<textarea class="form-control" id="contents" name ="replyContents" rows="3"></textarea>
								<button type="button" class="btn btn-dark mt-3" onClick="replyWrite();" sec:authorize="hasAnyRole('ROLE_ADMIN','ROLE_USER')">댓글 작성</button>
						    </li>
						</ul>
					</div>
				</div>
				<!-- Commentlist start -->
				<div id="replylist"></div> 
				<!-- Comment end -->
			</div>
		</div>
	</div>
</div>
<script type="text/javascript">

var filegroupid = $('#fileGroupId').val();
let pwd = $('#pwd').val();

console.log(pwd);

//비밀번호화면 이동 페이지o.k
function pwdCheck(){
		
	let pwd = $('#pwd').val();
	let id = $('#board_id').val();
	
	//비밀번호를 입력하지 않았을 경우 또는 비밀번호가 null인 경우
	if(pwd.trim().length == 0){
		
		location.href = '/page/board/modify/'+id;
		return false;
	}else if(pwd != null){
		location.href='/page/board/passwrodcheck/'+id;
		return false;
	}
		return true;	
}
</script>
<script th:src="/js/reply/boardreply.js"/>
</th:block>
</body>
</html>